"use strict";(self.webpackChunkmybase=self.webpackChunkmybase||[]).push([[38059],{90477:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>x,frontMatter:()=>d,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"\u5de6\u8033\u542c\u98ce/\u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff088\uff09-Go\u8bed\u8a00\u7684\u59d4\u6258\u6a21\u5f0f-37","title":"37 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff088\uff09- Go \u8bed\u8a00\u7684\u59d4\u6258\u6a21\u5f0f","description":"\u4f60\u597d\uff0c\u6211\u662f\u9648\u7693\uff0c\u7f51\u540d\u5de6\u8033\u6735\u8017\u5b50\u3002","source":"@site/docs/\u5de6\u8033\u542c\u98ce/\u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff088\uff09-Go\u8bed\u8a00\u7684\u59d4\u6258\u6a21\u5f0f-37.md","sourceDirName":"\u5de6\u8033\u542c\u98ce","slug":"/\u5de6\u8033\u542c\u98ce/\u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff088\uff09-Go\u8bed\u8a00\u7684\u59d4\u6258\u6a21\u5f0f-37","permalink":"/\u5de6\u8033\u542c\u98ce/\u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff088\uff09-Go\u8bed\u8a00\u7684\u59d4\u6258\u6a21\u5f0f-37","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"someSidebar","previous":{"title":"36 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff087\uff09- \u57fa\u4e8e\u539f\u578b\u7684\u7f16\u7a0b\u8303\u5f0f","permalink":"/\u5de6\u8033\u542c\u98ce/\u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff087\uff09-\u57fa\u4e8e\u539f\u578b\u7684\u7f16\u7a0b\u8303\u5f0f-36"},"next":{"title":"38 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff089\uff09- \u7f16\u7a0b\u7684\u672c\u8d28","permalink":"/\u5de6\u8033\u542c\u98ce/\u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff089\uff09-\u7f16\u7a0b\u7684\u672c\u8d28-38"}}');var r=t(74848),s=t(28453);const d={},c="37 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff088\uff09- Go \u8bed\u8a00\u7684\u59d4\u6258\u6a21\u5f0f",l={},o=[];function a(n){const e={a:"a",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"37--\u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb08--go-\u8bed\u8a00\u7684\u59d4\u6258\u6a21\u5f0f",children:"37 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff088\uff09- Go \u8bed\u8a00\u7684\u59d4\u6258\u6a21\u5f0f"})}),"\n",(0,r.jsx)(e.p,{children:"\u4f60\u597d\uff0c\u6211\u662f\u9648\u7693\uff0c\u7f51\u540d\u5de6\u8033\u6735\u8017\u5b50\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u518d\u6765\u770bGo\u8bed\u8a00\u8fd9\u4e2a\u6a21\u5f0f\uff0cGo\u8bed\u8a00\u7684\u8fd9\u4e2a\u6a21\u5f0f\u633a\u597d\u73a9\u513f\u7684\u3002\u58f0\u660e\u4e00\u4e2astruct\uff0c\u8ddfC\u5f88\u4e00\u6837\uff0c\u7136\u540e\u76f4\u63a5\u628a\u8fd9\u4e2astruct\u7c7b\u578b\u653e\u5230\u53e6\u4e00\u4e2astruct\u91cc\u3002"}),"\n",(0,r.jsx)(e.h1,{id:"\u59d4\u6258\u7684\u7b80\u5355\u793a\u4f8b",children:"\u59d4\u6258\u7684\u7b80\u5355\u793a\u4f8b"}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u6765\u770b\u51e0\u4e2a\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'type Widget struct {\n    X, Y int\n}\n\ntype Label struct {\n    Widget        // Embedding (delegation)\n    Text   string // Aggregation\n    X int         // Override\n}\n\nfunc (label Label) Paint() {\n\t// [0xc4200141e0] - Label.Paint("State")\n    fmt.Printf("[%p] - Label.Paint(%q)\\n",\n    \t&label, label.Text)\n}\n\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u7531\u4e0a\u9762\u53ef\u77e5\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u6211\u4eec\u58f0\u660e\u4e86\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"Widget"}),"\uff0c\u5176\u6709 ",(0,r.jsx)(e.code,{children:"X"})," \u548c ",(0,r.jsx)(e.code,{children:"Y"}),"\uff1b"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u7136\u540e\u7528\u5b83\u6765\u58f0\u660e\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"Label"}),"\uff0c\u76f4\u63a5\u628a ",(0,r.jsx)(e.code,{children:"Widget"})," \u59d4\u6258\u8fdb\u53bb\uff1b"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u7136\u540e\u518d\u7ed9 ",(0,r.jsx)(e.code,{children:"Label"})," \u58f0\u660e\u5e76\u5b9e\u73b0\u4e86\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"Paint()"})," \u65b9\u6cd5\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd9\u6837\u7f16\u7a0b\u4e86\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'label := Label{Widget{10, 10}, "State", 100}\n\n// X=100, Y=10, Text=State, Widget.X=10\nfmt.Printf("X=%d, Y=%d, Text=%s Widget.X=%d\\n",\n\tlabel.X, label.Y, label.Text,\n\tlabel.Widget.X)\nfmt.Println()\n// {Widget:{X:10 Y:10} Text:State X:100}\n// {{10 10} State 100}\nfmt.Printf("%+v\\n%v\\n", label, label)\n\nlabel.Paint()\n\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c\u6709\u6210\u5458\u53d8\u91cf\u91cd\u540d\uff0c\u5219\u9700\u8981\u624b\u52a8\u5730\u89e3\u51b3\u51b2\u7a81\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u7ee7\u7eed\u6269\u5c55\u4ee3\u7801\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u5148\u6765\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"Button"}),"\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'type Button struct {\n    Label // Embedding (delegation)\n}\n\nfunc NewButton(x, y int, text string) Button {\n    return Button{Label{Widget{x, y}, text, x}}\n}\nfunc (button Button) Paint() { // Override\n    fmt.Printf("[%p] - Button.Paint(%q)\\n",\n    \t&button, button.Text)\n}\nfunc (button Button) Click() {\n    fmt.Printf("[%p] - Button.Click()\\n", &button)\n}\n\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u518d\u6765\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"ListBox"}),"\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'type ListBox struct {\n    Widget          // Embedding (delegation)\n    Texts  []string // Aggregation\n    Index  int      // Aggregation\n}\nfunc (listBox ListBox) Paint() {\n    fmt.Printf("[%p] - ListBox.Paint(%q)\\n",\n    \t&listBox, listBox.Texts)\n}\nfunc (listBox ListBox) Click() {\n    fmt.Printf("[%p] - ListBox.Click()\\n", &listBox)\n}\n\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u7136\u540e\uff0c\u58f0\u660e\u4e24\u4e2a\u63a5\u53e3\u7528\u4e8e\u591a\u6001\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"type Painter interface {\n    Paint()\n}\n\ntype Clicker interface {\n    Click()\n}\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd9\u6837\u6cdb\u578b\u5730\u4f7f\u7528\uff08\u6ce8\u610f\u5176\u4e2d\u7684\u4e24\u4e2afor\u5faa\u73af\uff09\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'button1 := Button{Label{Widget{10, 70}, "OK", 10}}\nbutton2 := NewButton(50, 70, "Cancel")\nlistBox := ListBox{Widget{10, 40},\n    []string{"AL", "AK", "AZ", "AR"}, 0}\n\nfmt.Println()\n//[0xc4200142d0] - Label.Paint("State")\n//[0xc420014300] - ListBox.Paint(["AL" "AK" "AZ" "AR"])\n//[0xc420014330] - Button.Paint("OK")\n//[0xc420014360] - Button.Paint("Cancel")\nfor _, painter := range []Painter{label, listBox, button1, button2} {\n\tpainter.Paint()\n}\n\nfmt.Println()\n//[0xc420014450] - ListBox.Click()\n//[0xc420014480] - Button.Click()\n//[0xc4200144b0] - Button.Click()\nfor _, widget := range []interface{}{label, listBox, button1, button2} {\n    if clicker, ok := widget.(Clicker); ok {\n    \tclicker.Click()\n    }\n}\n\n'})}),"\n",(0,r.jsx)(e.h1,{id:"\u4e00\u4e2a-undo-\u7684\u59d4\u6258\u91cd\u6784",children:"\u4e00\u4e2a Undo \u7684\u59d4\u6258\u91cd\u6784"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0a\u9762\u8fd9\u4e2a\u662f Go \u8bed\u8a00\u4e2d\u7684\u59d4\u6258\u548c\u63a5\u53e3\u591a\u6001\u7684\u7f16\u7a0b\u65b9\u5f0f\uff0c\u5176\u5b9e\u662f\u9762\u5411\u5bf9\u8c61\u548c\u539f\u578b\u7f16\u7a0b\u7efc\u5408\u7684\u73a9\u6cd5\u3002\u8fd9\u4e2a\u73a9\u6cd5\u53ef\u4e0d\u53ef\u4ee5\u73a9\u5f97\u66f4\u6709\u610f\u601d\u5462\uff1f\u8fd9\u662f\u53ef\u4ee5\u7684\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u9996\u5148\uff0c\u6211\u4eec\u5148\u58f0\u660e\u4e00\u4e2a\u6570\u636e\u5bb9\u5668\uff0c\u5176\u4e2d\u6709 ",(0,r.jsx)(e.code,{children:"Add()"}),"\u3001 ",(0,r.jsx)(e.code,{children:"Delete()"})," \u548c ",(0,r.jsx)(e.code,{children:"Contains()"})," \u65b9\u6cd5\u3002\u8fd8\u6709\u4e00\u4e2a\u8f6c\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'type IntSet struct {\n    data map[int]bool\n}\n\nfunc NewIntSet() IntSet {\n    return IntSet{make(map[int]bool)}\n}\n\nfunc (set *IntSet) Add(x int) {\n    set.data[x] = true\n}\n\nfunc (set *IntSet) Delete(x int) {\n    delete(set.data, x)\n}\n\nfunc (set *IntSet) Contains(x int) bool {\n    return set.data[x]\n}\n\nfunc (set *IntSet) String() string { // Satisfies fmt.Stringer interface\n    if len(set.data) == 0 {\n        return "{}"\n    }\n    ints := make([]int, 0, len(set.data))\n    for i := range set.data {\n        ints = append(ints, i)\n    }\n    sort.Ints(ints)\n    parts := make([]string, 0, len(ints))\n    for _, i := range ints {\n        parts = append(parts, fmt.Sprint(i))\n    }\n    return "{" + strings.Join(parts, ",") + "}"\n}\n\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u5982\u4e0b\u4f7f\u7528\u8fd9\u4e2a\u6570\u636e\u5bb9\u5668\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'ints := NewIntSet()\nfor _, i := range []int{1, 3, 5, 7} {\n    ints.Add(i)\n    fmt.Println(ints)\n}\nfor _, i := range []int{1, 2, 3, 4, 5, 6, 7} {\n    fmt.Print(i, ints.Contains(i), " ")\n    ints.Delete(i)\n    fmt.Println(ints)\n}\n\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u4e2a\u6570\u636e\u5bb9\u5668\u5e73\u6de1\u65e0\u5947\uff0c\u6211\u4eec\u60f3\u7ed9\u5b83\u52a0\u4e00\u4e2aUndo\u7684\u529f\u80fd\u3002\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6765\u505a\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'type UndoableIntSet struct { // Poor style\n    IntSet    // Embedding (delegation)\n    functions []func()\n}\n\nfunc NewUndoableIntSet() UndoableIntSet {\n    return UndoableIntSet{NewIntSet(), nil}\n}\n\nfunc (set *UndoableIntSet) Add(x int) { // Override\n    if !set.Contains(x) {\n        set.data[x] = true\n        set.functions = append(set.functions, func() { set.Delete(x) })\n    } else {\n        set.functions = append(set.functions, nil)\n    }\n}\n\nfunc (set *UndoableIntSet) Delete(x int) { // Override\n    if set.Contains(x) {\n        delete(set.data, x)\n        set.functions = append(set.functions, func() { set.Add(x) })\n    } else {\n        set.functions = append(set.functions, nil)\n    }\n}\n\nfunc (set *UndoableIntSet) Undo() error {\n    if len(set.functions) == 0 {\n        return errors.New("No functions to undo")\n    }\n    index := len(set.functions) - 1\n    if function := set.functions[index]; function != nil {\n        function()\n        set.functions[index] = nil // Free closure for garbage collection\n    }\n    set.functions = set.functions[:index]\n    return nil\n}\n\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u4e8e\u662f\u5c31\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\u4e86\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'ints := NewUndoableIntSet()\nfor _, i := range []int{1, 3, 5, 7} {\n    ints.Add(i)\n    fmt.Println(ints)\n}\nfor _, i := range []int{1, 2, 3, 4, 5, 6, 7} {\n    fmt.Println(i, ints.Contains(i), " ")\n    ints.Delete(i)\n    fmt.Println(ints)\n}\nfmt.Println()\nfor {\n    if err := ints.Undo(); err != nil {\n        break\n    }\n    fmt.Println(ints)\n}\n\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u4f46\u662f\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u7528\u4e86\u4e00\u4e2a\u65b0\u7684 ",(0,r.jsx)(e.code,{children:"UndoableIntSet"})," \u51e0\u4e4e\u91cd\u5199\u4e86\u6240\u6709\u7684 ",(0,r.jsx)(e.code,{children:"IntSet"})," \u548c \u201c\u5199\u201d \u76f8\u5173\u7684\u65b9\u6cd5\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u628a\u64cd\u4f5c\u8bb0\u5f55\u4e0b\u6765\uff0c\u7136\u540e ",(0,r.jsx)(e.strong,{children:"Undo"})," \u4e86\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4f46\u662f\uff0c\u53ef\u80fd\u522b\u7684\u7c7b\u4e5f\u9700\u8981Undo\u7684\u529f\u80fd\uff0c\u6211\u662f\u4e0d\u662f\u8981\u91cd\u5199\u6240\u6709\u7684\u9700\u8981\u8fd9\u4e2a\u529f\u80fd\u7684\u7c7b\u554a\uff1f\u8fd9\u6837\u7684\u4ee3\u7801\u7c7b\u4f3c\uff0c\u5c31\u662f\u56e0\u4e3a\u6570\u636e\u5bb9\u5668\u4e0d\u4e00\u6837\uff0c\u6211\u5c31\u8981\u53bb\u91cd\u5199\u5b83\u4eec\uff0c\u8fd9\u592a\u4e8c\u4e86\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u80fd\u4e0d\u80fd\u5229\u7528\u524d\u9762\u5b66\u5230\u7684\u6cdb\u578b\u7f16\u7a0b\u3001\u51fd\u6570\u5f0f\u7f16\u7a0b\u3001IoC\u7b49\u8303\u5f0f\u6765\u628a\u8fd9\u4e2a\u4e8b\u5e72\u5f97\u597d\u4e00\u4e9b\u5462\uff1f\u5f53\u7136\u662f\u53ef\u4ee5\u7684\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u6211\u4eec\u5148\u58f0\u660e\u4e00\u4e2a ",(0,r.jsx)(e.code,{children:"Undo[]"})," \u7684\u51fd\u6570\u6570\u7ec4\uff08\u5176\u5b9e\u662f\u4e00\u4e2a\u6808\uff09\uff1b"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u5e76\u5b9e\u73b0\u4e00\u4e2a\u901a\u7528 ",(0,r.jsx)(e.code,{children:"Add()"}),"\u3002\u5176\u9700\u8981\u4e00\u4e2a\u51fd\u6570\u6307\u9488\uff0c\u5e76\u628a\u8fd9\u4e2a\u51fd\u6570\u6307\u9488\u5b58\u653e\u5230 ",(0,r.jsx)(e.code,{children:"Undo[]"})," \u51fd\u6570\u6570\u7ec4\u4e2d\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u5728 ",(0,r.jsx)(e.code,{children:"Undo()"})," \u7684\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u4f1a\u904d\u5386 ",(0,r.jsx)(e.code,{children:"Undo[]"})," \u51fd\u6570\u6570\u7ec4\uff0c\u5e76\u6267\u884c\u4e4b\uff0c\u6267\u884c\u5b8c\u540e\u5c31\u5f39\u6808\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:'type Undo []func()\n\nfunc (undo *Undo) Add(function func()) {\n    *undo = append(*undo, function)\n}\n\nfunc (undo *Undo) Undo() error {\n    functions := *undo\n    if len(functions) == 0 {\n        return errors.New("No functions to undo")\n    }\n    index := len(functions) - 1\n    if function := functions[index]; function != nil {\n        function()\n        functions[index] = nil // Free closure for garbage collection\n    }\n    *undo = functions[:index]\n    return nil\n}\n\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u90a3\u4e48\u6211\u4eec\u7684 ",(0,r.jsx)(e.code,{children:"IntSet"})," \u5c31\u53ef\u4ee5\u6539\u5199\u6210\u5982\u4e0b\u7684\u5f62\u5f0f\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"type IntSet struct {\n    data map[int]bool\n    undo Undo\n}\n\nfunc NewIntSet() IntSet {\n    return IntSet{data: make(map[int]bool)}\n}\n\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u7136\u540e\u5728\u5176\u4e2d\u7684 ",(0,r.jsx)(e.code,{children:"Add"})," \u548c ",(0,r.jsx)(e.code,{children:"Delete"})," \u4e2d\u5b9e\u73b0 Undo \u64cd\u4f5c\u3002"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"Add"})," \u64cd\u4f5c\u65f6\u52a0\u5165 ",(0,r.jsx)(e.code,{children:"Delete"})," \u64cd\u4f5c\u7684 Undo\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"Delete"})," \u64cd\u4f5c\u65f6\u52a0\u5165 ",(0,r.jsx)(e.code,{children:"Add"})," \u64cd\u4f5c\u7684 Undo\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\nfunc (set *IntSet) Add(x int) {\n    if !set.Contains(x) {\n        set.data[x] = true\n        set.undo.Add(func() { set.Delete(x) })\n    } else {\n        set.undo.Add(nil)\n    }\n}\n\nfunc (set *IntSet) Delete(x int) {\n    if set.Contains(x) {\n        delete(set.data, x)\n        set.undo.Add(func() { set.Add(x) })\n    } else {\n        set.undo.Add(nil)\n    }\n}\n\nfunc (set *IntSet) Undo() error {\n    return set.undo.Undo()\n}\n\nfunc (set *IntSet) Contains(x int) bool {\n    return set.data[x]\n}\n\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u4eec\u518d\u6b21\u770b\u5230\uff0cGo\u8bed\u8a00\u7684Undo\u63a5\u53e3\u628aUndo\u7684\u6d41\u7a0b\u7ed9\u62bd\u8c61\u51fa\u6765\uff0c\u800c\u8981\u600e\u4e48Undo\u7684\u4e8b\u4ea4\u7ed9\u4e86\u4e1a\u52a1\u4ee3\u7801\u6765\u7ef4\u62a4\uff08\u901a\u8fc7\u6ce8\u518c\u4e00\u4e2aUndo\u7684\u65b9\u6cd5\uff09\u3002\u8fd9\u6837\u5728Undo\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u56de\u8c03\u8fd9\u4e2a\u65b9\u6cd5\u6765\u505a\u4e0e\u4e1a\u52a1\u76f8\u5173\u7684Undo\u64cd\u4f5c\u4e86\u3002"}),"\n",(0,r.jsx)(e.h1,{id:"\u5c0f\u7ed3",children:"\u5c0f\u7ed3"}),"\n",(0,r.jsxs)(e.p,{children:["\u8fd9\u662f\u4e0d\u662f\u548c\u6700\u4e00\u5f00\u59cb\u7684C++\u7684\u6cdb\u578b\u7f16\u7a0b\u5f88\u50cf\uff1f\u4e5f\u548cmap\u3001reduce\u3001filter\u8fd9\u6837\u7684\u53ea\u5173\u5fc3\u63a7\u5236\u6d41\u7a0b\uff0c\u4e0d\u5173\u5fc3\u4e1a\u52a1\u903b\u8f91\u7684\u505a\u6cd5\u5f88\u50cf\uff1f\u800c\u4e14\uff0c\u4e00\u5f00\u59cb\u7528\u4e00\u4e2aUndoableIntSet\u6765\u5305\u88c5 ",(0,r.jsx)(e.code,{children:"IntSet"})," \u7c7b\uff0c\u5230\u53cd\u8fc7\u6765\u5728 ",(0,r.jsx)(e.code,{children:"IntSet"})," \u91cc\u4f9d\u8d56 ",(0,r.jsx)(e.code,{children:"Undo"})," \u7c7b\uff0c\u8fd9\u5c31\u662f\u63a7\u5236\u53cd\u8f6cIoC\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4ee5\u4e0b\u662f\u300a\u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\u300b\u7cfb\u5217\u6587\u7ae0\u7684\u76ee\u5f55\uff0c\u65b9\u4fbf\u4f60\u4e86\u89e3\u8fd9\u4e00\u7cfb\u5217\u5185\u5bb9\u7684\u5168\u8c8c\u3002"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/301",children:"01 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u8d77\u6e90"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/303",children:"02 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u6cdb\u578b\u7f16\u7a0b"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/2017",children:"03 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u7c7b\u578b\u7cfb\u7edf\u548c\u6cdb\u578b\u7684\u672c\u8d28"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/2711",children:"04 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u51fd\u6570\u5f0f\u7f16\u7a0b"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/2723",children:"05 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u4fee\u9970\u5668\u6a21\u5f0f"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/2729",children:"06 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/2741",children:"07 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u57fa\u4e8e\u539f\u578b\u7684\u7f16\u7a0b\u8303\u5f0f"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/2748",children:"08 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1aGo \u8bed\u8a00\u7684\u59d4\u6258\u6a21\u5f0f"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/2751",children:"09 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u7f16\u7a0b\u7684\u672c\u8d28"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/2752",children:"10 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u903b\u8f91\u7f16\u7a0b\u8303\u5f0f"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://time.geekbang.org/column/article/2754",children:"11 | \u7f16\u7a0b\u8303\u5f0f\u6e38\u8bb0\uff1a\u7a0b\u5e8f\u4e16\u754c\u91cc\u7684\u7f16\u7a0b\u8303\u5f0f"})}),"\n"]})]})}function x(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>d,x:()=>c});var i=t(96540);const r={},s=i.createContext(r);function d(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);