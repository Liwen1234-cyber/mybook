<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
   <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no, viewport-fit=cover">
   <meta name="description" content="">
   <title>Coisini's document</title>

   <!-- Themes (light + dark) -->
   <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple-dark.css">
   <link rel="stylesheet" media="(prefers-color-scheme: light)" href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple.css">

   <!-- 流程图 -->
   <link rel="stylesheet" href="//unpkg.com/mermaid/dist/mermaid.min.css" />
   <!-- Custom Styles -->
   <style>
    :root{
      --base-font-family: -apple-system, BlinkMacSystemFont, "LXGW Wenkai", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      --base-font-size: 16px;
      --base-background-color: #d9e6fa;
      --theme-color: #4776fc;

      --code-inline-background: #c7d3e4;
      --code-theme-background: #c3cede;

      /* --strong-color: #ffaf63; */
      --strong-font-weight: 750;

      --heading-h1-color: #e378b6;
      --heading-h2-color: #b293f6;
      --heading-h3-color: #df5555;
      --heading-h4-color: #f6b269;
      --heading-h5-color: #80dc69;
      --heading-h6-color: #35cffe;

      --heading-h3-font-size: calc(var(--font-size-xl) * calc(var(--modular-scale) - 0.4));
      --heading-h4-font-size: calc(var(--font-size-l) * calc(var(--modular-scale) - 0.2));
      --heading-h5-font-size: var(--font-size-l);
      --heading-h6-font-size: calc(var(--font-size-l) * calc(var(--modular-scale) - 0.4));

      --heading-h2-padding: 0;
      --heading-h2-font-weight: 500;
      --heading-h4-margin: 30px 0px -5px;
      --heading-h5-margin: 20px 0px -8px;
      --heading-h6-margin: 20px 0px -5px;

    }

    em{
        color: #41a6fe;
        font-weight: 600;
    }
   </style>
</head>
<body>
  <div id="app">77 is waiting for...</div>

   <script>
     // Docsify Configuration
     window.$docsify = {
      el: '#app',
      name: "Coisini's document",
      repo: '',
      coverpage: false,
      loadSidebar: true,
      loadNavbar: false
      ,
      subMaxLevel: 3,
      auto2top: true,
      alias: {
        '/.*/_sidebar.md': '/_sidebar.md'
      },
      // pagination: {
      //   previousText: 'Previous',
      //   nextText: 'Next',
      //   crossChapter: true,
      //   crossChapterText: true,
      // },
      count:{
        countable:true,
        fontsize:'0.9em',
        color:'rgb(90,90,90)',
        language:'chinese'
      },
      cusdis: {
        host: 'https://cusdis.com',
        appId: '838a37e7-c0e1-4ace-9fd0-bbc828b300c8',
      },
      latex: {
        inlineMath   : [['$', '$'], ['\\(', '\\)']], // default
        displayMath  : [['$$', '$$']],               // default
      },
      plugins: [
        function(hook, vm) {
          hook.afterEach(function(html, next) {
            // 查找所有加密内容
            let encryptedContent = html.match(/\{\{encrypt\}\}([\s\S]*?)\{\{\/encrypt\}\}/g);
            
            if (encryptedContent) {
              encryptedContent.forEach(function(content) {
                let decrypted = content.replace(/\{\{encrypt\}\}([\s\S]*?)\{\{\/encrypt\}\}/, function(match, p1) {
                  let id = Math.random().toString(36).substring(7);
                  return `
                    <div id="${id}">
                      <p>这是加密内容。请输入密码查看：</p>
                      <input type="password" id="pwd-${id}">
                      <button onclick="decryptContent('${id}', '${CryptoJS.AES.encrypt(p1, '020718').toString()}')">解密</button>
                    </div>
                  `;
                });
                html = html.replace(content, decrypted);
              });
            }
            next(html);
          });
        },
        function (hook, vm) {
          hook.ready(function () {
            mermaid.initialize({ startOnLoad: false });
          });

          hook.doneEach(function () {
            mermaid.init(undefined, ".mermaid");
          });
        },
      ],
      markdown: {
        renderer: {
          code: function (code, lang) {
            var html = "";
            if (lang === "mermaid") {
              html = '<div class="mermaid">' + code + '</div>';
              return html;
            }
            return this.origin.code.apply(this, arguments);
          },
        },
      },
    }

    //解密函数
    function decryptContent(id, encryptedContent) {
      let password = document.getElementById(`pwd-${id}`).value;
      try {
        let decrypted = CryptoJS.AES.decrypt(encryptedContent, password).toString(CryptoJS.enc.Utf8);
        if (decrypted) {
          document.getElementById(id).innerHTML = decrypted;
        } else {
          alert('密码错误！');
        }
      } catch (e) {
        alert('解密失败，请检查密码！');
      }
    }
   </script>

   <!-- Required -->
   <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/js/docsify-themeable.min.js"></script>

   <!-- Recommended -->
   <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/plugins/zoom-image.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
   <!-- <script src="https://unpkg.com/docsify-pagination/dist/docsify-pagination.min.js"></script> -->
   <!--crypt-->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
   <script src="./js/docsify-decrypt-content.js"></script>

   <script src="//unpkg.com/docsify-count/dist/countable.js"></script>
   <!-- comment -->
   <script src="https://cusdis.com/js/cusdis.docsify.js"></script> <!-- cusdis核心库 -->
   <!-- mathjax -->
   <script src="//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
   <script src="//cdn.jsdelivr.net/npm/docsify-latex@0"></script>

   <!-- 流程图 -->
   <script type="text/javascript" src="//unpkg.com/mermaid/dist/mermaid.min.js"></script>
</body>
</html>

