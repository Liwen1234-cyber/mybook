### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[é¢è¯•é¢˜ 01.09. å­—ç¬¦ä¸²è½®è½¬](https://leetcode.cn/problems/string-rotation-lcci/solution/by-ac_oier-2wo1/)** ï¼Œéš¾åº¦ä¸º **ç®€å•**ã€‚

Tag : ã€Œå­—ç¬¦ä¸²å“ˆå¸Œã€



å­—ç¬¦ä¸²è½®è½¬ã€‚ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `s1` å’Œ `s2`ï¼Œè¯·ç¼–å†™ä»£ç æ£€æŸ¥ `s2` æ˜¯å¦ä¸º `s1` æ—‹è½¬è€Œæˆï¼ˆæ¯”å¦‚ï¼Œ`waterbottle` æ˜¯ `erbottlewat` æ—‹è½¬åçš„å­—ç¬¦ä¸²ï¼‰ã€‚

ç¤ºä¾‹1:
```
è¾“å…¥ï¼šs1 = "waterbottle", s2 = "erbottlewat"

è¾“å‡ºï¼šTrue
```
ç¤ºä¾‹2:
```
è¾“å…¥ï¼šs1 = "aa", s2 = "aba"

è¾“å‡ºï¼šFalse
```
æç¤ºï¼š
* å­—ç¬¦ä¸²é•¿åº¦åœ¨ $[0, 100000]$ èŒƒå›´å†…ã€‚

è¯´æ˜:
ä½ èƒ½åªè°ƒç”¨ä¸€æ¬¡æ£€æŸ¥å­ä¸²çš„æ–¹æ³•å—ï¼Ÿ

---

### å­—ç¬¦ä¸²å“ˆå¸Œ

è‹¥ä¸¤å­—ç¬¦ä¸²äº’ä¸ºæ—‹è½¬ï¼Œåˆ™ã€Œå…¶ä¸€å­—ç¬¦ä¸²ã€å¿…ç„¶ä¸ºã€Œå¦ä¸€å­—ç¬¦ä¸²æ‹“å±•ä¸¤å€é•¿åº¦åï¼ˆå¾ªç¯å­ä¸²ï¼‰ã€çš„å­ä¸²ã€‚

åŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ã€Œå­—ç¬¦ä¸²å“ˆå¸Œã€è¿›è¡Œæ±‚è§£ï¼šå…ˆè®¡ç®— `s2` çš„å­—ç¬¦ä¸²å“ˆå¸Œå€¼ `t`ï¼Œç„¶åæ„é€ å‡º `s1 + s1` çš„å“ˆå¸Œæ•°ç»„å’Œæ¬¡æ–¹æ•°ç»„ï¼Œåœ¨ä¸¤æ•°ç»„ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨é•¿åº¦ä¸º $n$ çš„è¿ç»­å­æ®µçš„å“ˆå¸Œå€¼ `cur` ä¸ `t` ç›¸ç­‰ã€‚

**ä¸äº†è§£å­—ç¬¦ä¸²å“ˆå¸Œçš„åŒå­¦å¯ä»¥çœ‹å‰ç½®ğŸ§€ : [å­—ç¬¦ä¸²å“ˆå¸Œå…¥é—¨](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247489813&idx=1&sn=7f3bc18ca390d85b17655f7164d8e660)**

> ä¸€äº›ç»†èŠ‚ï¼šå…¶ä»–è¯­è¨€å¯èƒ½ä¸åƒ `Java` é‚£æ ·å­˜åœ¨è‡ªç„¶å–æ¨¡ï¼Œå¯æ‰‹åŠ¨å–æ¨¡ï¼Œå¯¹äºè‡ªå¸¦é«˜ç²¾åº¦çš„è¯­è¨€è‹¥ä¸å–æ¨¡ä¼šå¯¼è‡´å•æ¬¡è®¡ç®—å¤æ‚åº¦ä¸Šå‡ï¼Œä¼š `TLE`ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    static int N = 200010, P = 13131;
    static int[] h = new int[N], p = new int[N];
    public boolean isFlipedString(String s1, String s2) {
        if (s1.length() != s2.length()) return false;
        int n = s1.length();
        for (int i = 1; i <= n; i++) h[i] = h[i - 1] * P + s2.charAt(i - 1);
        int t = h[n]; // s2 hash
        s1 = s1 + s1;
        p[0] = 1;
        for (int i = 1; i <= 2 * n; i++) {
            h[i] = h[i - 1] * P + s1.charAt(i - 1);
            p[i] = p[i - 1] * P;
        }
        for (int i = 1; i + n - 1 <= 2 * n; i++) {
            int j = i + n - 1, cur = h[j] - h[i - 1] * p[j - i + 1];
            if (cur == t) return true;
        }
        return false;
    }
}
```
Python ä»£ç ï¼š
```Python
N, P, MOD = 200010, 13131, 987654321
h, p = [0] * N, [1] * N
class Solution:
    def isFlipedString(self, s1: str, s2: str) -> bool:
        if len(s1) != len(s2):
            return False
        if s1 == s2:
            return True
        n = len(s1)
        for i in range(1, n + 1):
            h[i] = (h[i - 1] * P + ord(s2[i - 1])) % MOD
        t = h[n]
        s1 = s1 + s1
        for i in range(1, 2 * n + 1):
            h[i] = (h[i - 1] * P + ord(s1[i - 1])) % MOD
            p[i] = (p[i - 1] * P) % MOD
        for i in range(1, n + 1):
            j = i + n - 1
            cur = (h[j] - h[i - 1] * p[j - i + 1]) % MOD
            if cur == t:
                return True
        return False
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---



