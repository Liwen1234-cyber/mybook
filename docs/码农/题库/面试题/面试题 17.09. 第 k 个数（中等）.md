### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[é¢è¯•é¢˜ 17.09. ç¬¬ k ä¸ªæ•°](https://leetcode.cn/problems/get-kth-magic-number-lcci/solution/by-ac_oier-2czm/)** ï¼Œéš¾åº¦ä¸º **å›°éš¾**ã€‚

Tag : ã€Œä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå †ï¼‰ã€ã€ã€Œå¤šè·¯å½’å¹¶ã€ã€ã€ŒåŒæŒ‡é’ˆã€



æœ‰äº›æ•°çš„ç´ å› å­åªæœ‰ `3`ï¼Œ`5`ï¼Œ`7`ï¼Œè¯·è®¾è®¡ä¸€ä¸ªç®—æ³•æ‰¾å‡ºç¬¬ `k` ä¸ªæ•°ã€‚æ³¨æ„ï¼Œä¸æ˜¯å¿…é¡»æœ‰è¿™äº›ç´ å› å­ï¼Œè€Œæ˜¯å¿…é¡»ä¸åŒ…å«å…¶ä»–çš„ç´ å› å­ã€‚ä¾‹å¦‚ï¼Œå‰å‡ ä¸ªæ•°æŒ‰é¡ºåºåº”è¯¥æ˜¯ `1`ï¼Œ`3`ï¼Œ`5`ï¼Œ`7`ï¼Œ`9`ï¼Œ`15`ï¼Œ`21`ã€‚

ç¤ºä¾‹ 1:
```
è¾“å…¥: k = 5

è¾“å‡º: 9
```

---

### åŸºæœ¬åˆ†æ

æœ¬é¢˜çš„åŸºæœ¬æ€è·¯ä¸ [264. ä¸‘æ•° II : ä»æœ´ç´ ä¼˜å…ˆé˜Ÿåˆ—åˆ°å¤šè·¯å½’å¹¶](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247490029&idx=1&sn=bba9ddff88d247db310406ee418d5a15) å®Œå…¨ä¸€è‡´ã€‚

---

### ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå°æ ¹å †ï¼‰

æœ‰äº†åŸºæœ¬çš„åˆ†ææ€è·¯ï¼Œä¸€ä¸ªç®€å•çš„è§£æ³•æ˜¯ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼š

1. èµ·å§‹å…ˆå°†æœ€å°æ•°å€¼ $1$ æ”¾å…¥é˜Ÿåˆ—
2. æ¯æ¬¡ä»é˜Ÿåˆ—å–å‡ºæœ€å°å€¼ $x$ï¼Œç„¶åå°† $x$ æ‰€å¯¹åº”çš„æ•°å€¼ $3x$ã€$5x$ å’Œ $7x$ è¿›è¡Œå…¥é˜Ÿ
3. å¯¹æ­¥éª¤ 2 å¾ªç¯å¤šæ¬¡ï¼Œç¬¬ $k$ æ¬¡å‡ºé˜Ÿçš„å€¼å³æ˜¯ç­”æ¡ˆ

ä¸ºäº†é˜²æ­¢åŒä¸€æ•°å€¼å¤šæ¬¡è¿›é˜Ÿï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ•°æ®ç»“æ„ $Set$ æ¥è®°å½•å…¥è¿‡é˜Ÿåˆ—çš„æ•°å€¼ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int getKthMagicNumber(int k) {
        int[] nums = new int[]{3, 5, 7};
        PriorityQueue<Long> q = new PriorityQueue<>();
        Set<Long> set = new HashSet<>();
        q.add(1L); set.add(1L);
        while (!q.isEmpty()) {
            long t = q.poll();
            if (--k == 0) return (int) t;
            for (int x : nums) {
                if (!set.contains(x * t)) {
                    q.add(x * t); set.add(x * t);
                }
            }
        }
        return -1;
    }
}
```
Python3 ä»£ç ï¼š
```Python3
class Solution:
    def getKthMagicNumber(self, k: int) -> int:
        nums = [3, 5, 7]
        q, vis = [], set()
        q.append(1)
        vis.add(1)
        while q:
            t = heapq.heappop(q)
            k -= 1
            if k == 0:
                return t
            for x in nums:
                if t * x not in vis:
                    heapq.heappush(q, t * x)
                    vis.add(t * x)
        return -1
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(k\log{k})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(k)$

---

### å¤šè·¯å½’å¹¶ï¼ˆå¤šæŒ‡é’ˆï¼‰

ä»è§£æ³•ä¸€ä¸­ä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬ã€Œå¾€åäº§ç”Ÿçš„æ•°å€¼ã€éƒ½æ˜¯åŸºäºã€Œå·²æœ‰æ•°å€¼ã€è€Œæ¥ï¼ˆä½¿ç”¨ã€Œå·²æœ‰æ•°å€¼ã€ä¹˜ä¸Š $3$ã€$5$ã€$7$ï¼‰ã€‚

å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æœ€ç»ˆçš„æ•°å€¼åºåˆ—ä¸º $a1,a2,a3,...,an$ çš„è¯ï¼Œåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªæ•°éƒ½å¿…ç„¶èƒ½å¤Ÿè¢«ä»¥ä¸‹ä¸‰ä¸ªåºåˆ—ï¼ˆä¸­çš„è‡³å°‘ä¸€ä¸ªï¼‰è¦†ç›–ï¼š

* ç”±æ•°å€¼ $\times 3$ æ‰€å¾—çš„æœ‰åºåºåˆ—ï¼š$1 \times 3$ã€$2 \times 3$ã€$3 \times 3$ã€$4 \times 3$ã€$5 \times 3$ã€$6 \times 3$ã€$8 \times 3$ ...
* ç”±æ•°å€¼ $\times 5$ æ‰€å¾—çš„æœ‰åºåºåˆ—ï¼š$1 \times 5$ã€$2 \times 5$ã€$3 \times 5$ã€$4 \times 5$ã€$5 \times 5$ã€$6 \times 5$ã€$8 \times 5$ ...
* ç”±æ•°å€¼ $\times 6$ æ‰€å¾—çš„æœ‰åºåºåˆ—ï¼š$1 \times 7$ã€$2 \times 7$ã€$3 \times 7$ã€$4 \times 7$ã€$5 \times 7$ã€$6 \times 7$ã€$8 \times 6$ ...

ä¸¾ä¸ªğŸŒ°ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦æ±‚å¾— $[1, 3, 5, 7, 9, 15, 21]$ æ•°å€¼åºåˆ— $arr$ çš„æœ€åä¸€ä½ï¼Œé‚£ä¹ˆè¯¥åºåˆ—å¯ä»¥çœ‹ä½œä»¥ä¸‹ä¸‰ä¸ªæœ‰åºåºåˆ—å½’å¹¶è€Œæ¥ï¼š

* $1 \times 3, 3 \times 3, 5 \times 3, ... , 15 \times 3, 21 \times 3$ ï¼Œå°† $3$ æå‡ºï¼Œå³ $arr \times 3$
* $1 \times 5, 3 \times 5, 5 \times 5, ... , 15 \times 5, 21 \times 5$ ï¼Œå°† $5$ æå‡ºï¼Œå³ $arr \times 5$
* $1 \times 7, 3 \times 7, 5 \times 7, ... , 15 \times 7, 21 \times 7$ ï¼Œå°† $7$ æå‡ºï¼Œå³ $arr \times 7$

å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªæŒ‡é’ˆæ¥æŒ‡å‘ç›®æ ‡åºåˆ— $arr$ çš„æŸä¸ªä¸‹æ ‡ï¼ˆä¸‹æ ‡ $0$ ä½œä¸ºå“¨å…µä¸ä½¿ç”¨ï¼Œèµ·å§‹éƒ½ä¸º $1$ï¼‰ï¼Œä½¿ç”¨ $arr[index] \times$ ç³»æ•°ï¼ˆ`3`ã€`5` å’Œ `7`ï¼‰ ä»£è¡¨å½“å‰ä½¿ç”¨åˆ°ä¸‰ä¸ªæœ‰åºåºåˆ—ä¸­çš„å“ªä¸€ä½ï¼ŒåŒæ—¶ä½¿ç”¨ $idx$ è¡¨ç¤ºå½“å‰ç”Ÿæˆåˆ° $arr$ å“ªä¸€ä½æ•°å€¼ã€‚

Java ä»£ç ï¼š
```Java
class Solution {
    public int getKthMagicNumber(int k) {
        int[] ans = new int[k + 1];
        ans[1] = 1;
        for (int i3 = 1, i5 = 1, i7 = 1, idx = 2; idx <= k; idx++) {
            int a = ans[i3] * 3, b = ans[i5] * 5, c = ans[i7] * 7;
            int min = Math.min(a, Math.min(b, c));
            if (min == a) i3++;
            if (min == b) i5++;
            if (min == c) i7++;
            ans[idx] = min;
        }
        return ans[k];
    }
}
```
TypeScript ä»£ç ï¼š
```TypeScript
function getKthMagicNumber(k: number): number {
    const ans = new Array<number>(k + 1).fill(1)
    for (let i3 = 1, i5 = 1, i7 = 1, idx = 2; idx <= k; idx++) {
        const a = ans[i3] * 3, b = ans[i5] * 5, c = ans[i7] * 7
        const min = Math.min(a, Math.min(b, c))
        if (a == min) i3++
        if (b == min) i5++
        if (c == min) i7++
        ans[idx] = min
    }
    return ans[k]
};
```
Python ä»£ç ï¼š
```Python
class Solution:
    def getKthMagicNumber(self, k: int) -> int:
        ans = [1] * (k + 1)
        i3, i5, i7 = 1, 1, 1
        for idx in range(2, k + 1):
            a, b, c = ans[i3] * 3, ans[i5] * 5, ans[i7] * 7
            cur = min([a, b, c])
            i3 = i3 + 1 if cur == a else i3
            i5 = i5 + 1 if cur == b else i5
            i7 = i7 + 1 if cur == c else i7
            ans[idx] = cur
        return ans[k]
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(k)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(k)$

---



