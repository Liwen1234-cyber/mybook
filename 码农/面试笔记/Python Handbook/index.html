<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-码农/面试笔记/Python Handbook" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Python | Coisini</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doc.middiy.top/码农/面试笔记/Python Handbook/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Python | Coisini"><meta data-rh="true" name="description" content="* 什么是 Python 生成器？"><meta data-rh="true" property="og:description" content="* 什么是 Python 生成器？"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doc.middiy.top/码农/面试笔记/Python Handbook/"><link data-rh="true" rel="alternate" href="https://doc.middiy.top/码农/面试笔记/Python Handbook/" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc.middiy.top/码农/面试笔记/Python Handbook/" hreflang="x-default"><meta name="google-site-verification" content="1FUPX6Qo4y3ecU623ShEurhgnjhSTjK49rRMhEDlzFA">
<link rel="stylesheet" href="/katex/katex.min.css">
<script src="/js/matomo.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.53ea8373.css">
<script src="/assets/js/runtime~main.ab17a911.js" defer="defer"></script>
<script src="/assets/js/main.130e24e2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Coisini</b></a></div><div class="navbar__items navbar__items--right"><a href="https://minddiy.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Main site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Python</h1></header>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-Python-%E7%94%9F%E6%88%90%E5%99%A8">什么是 Python 生成器？</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-Python-%E8%BF%AD%E4%BB%A3%E5%99%A8">什么是 Python 迭代器？</a></li>
<li><a href="#list-%E5%92%8C-tuple-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB">list 和 tuple 有什么区别？</a></li>
<li><a href="#Python-%E4%B8%AD%E7%9A%84-list-%E5%92%8C-dict-%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84">Python 中的 list 和 dict 是怎么实现的？</a></li>
<li><a href="#Python-%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%8F%AF%E4%BB%A5%E8%BE%BE%E5%88%B0%E5%A4%9A%E6%A0%B8CPU%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8%E5%90%97">Python 中使用多线程可以达到多核CPU一起使用吗？</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A3%85%E9%A5%B0%E5%99%A8">什么是装饰器？</a></li>
<li><a href="#Python-%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86">Python 如何进行内存管理？</a></li>
<li><a href="#Python-%E4%B8%AD%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6">Python 中的垃圾回收机制？</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F">什么是 lambda 表达式？</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D">什么是深拷贝和浅拷贝？</a></li>
<li><a href="#%E5%8F%8C%E7%AD%89%E4%BA%8E%E5%92%8C-is-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB">双等于和 is 有什么区别？</a></li>
<li><a href="#%E5%85%B6%E5%AE%83-Python-%E7%9F%A5%E8%AF%86%E7%82%B9">其它 Python 知识点</a></li>
<li><a href="#%E5%8F%82%E8%80%83">参考</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-python-生成器">什么是 Python 生成器？<a href="#什么是-python-生成器" class="hash-link" aria-label="Direct link to 什么是 Python 生成器？" title="Direct link to 什么是 Python 生成器？">​</a></h2>
<p>generator，有两种产生生成器对象的方式：一种是列表生成式加括号：</p>
<p><code>g1 = (x for x in range(10))</code></p>
<p>一种是在函数定义中包含<code>yield</code>关键字：</p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">def</span><span class="token plain"> </span><span class="token function" style="color:hsl(221, 87%, 60%)">fib</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token builtin" style="color:hsl(119, 34%, 47%)">max</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    n</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> b </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">while</span><span class="token plain"> n </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(119, 34%, 47%)">max</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">yield</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        a</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> b </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> a </span><span class="token operator" style="color:hsl(221, 87%, 60%)">+</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        n </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> n </span><span class="token operator" style="color:hsl(221, 87%, 60%)">+</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">return</span><span class="token plain"> </span><span class="token string" style="color:hsl(119, 34%, 47%)">&#x27;done&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">g2 </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> fib</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>对于generator对象g1和g2，可以通过<code>next(g1)</code>不断获得下一个元素的值，如果没有更多的元素，就会报错<code>StopIteration</code></p>
<p>也可以通过for循环获得元素的值。</p>
<p>生成器的好处是不用占用很多内存，只需要在用的时候计算元素的值就行了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-python-迭代器">什么是 Python 迭代器？<a href="#什么是-python-迭代器" class="hash-link" aria-label="Direct link to 什么是 Python 迭代器？" title="Direct link to 什么是 Python 迭代器？">​</a></h2>
<p>Python中可以用于for循环的，叫做可迭代<code>Iterable</code>，包括list/set/tuple/str/dict等数据结构以及生成器；可以用以下语句判断一个对象是否是可迭代的：</p>
<div class="language-py codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-py codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">from</span><span class="token plain"> collections </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">import</span><span class="token plain"> Iterable</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token builtin" style="color:hsl(119, 34%, 47%)">isinstance</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">,</span><span class="token plain"> Iterable</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>迭代器<code>Iterator</code>，是指可以被<code>next()</code>函数调用并不断返回下一个值，直到<code>StopIteration</code>；生成器都是Iterator，而列表等数据结构不是；可以通过以下语句将list变为Iterator：</p>
<p><code>iter([1,2,3,4,5])</code></p>
<p>生成器都是Iterator，但迭代器不一定是生成器。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="list-和-tuple-有什么区别">list 和 tuple 有什么区别？<a href="#list-和-tuple-有什么区别" class="hash-link" aria-label="Direct link to list 和 tuple 有什么区别？" title="Direct link to list 和 tuple 有什么区别？">​</a></h2>
<ul>
<li>list 长度可变，tuple不可变；</li>
<li>list 中元素的值可以改变，tuple 不能改变；</li>
<li>list 支持<code>append</code>; <code>insert</code>; <code>remove</code>; <code>pop</code>等方法，tuple 都不支持</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="python-中的-list-和-dict-是怎么实现的">Python 中的 list 和 dict 是怎么实现的？<a href="#python-中的-list-和-dict-是怎么实现的" class="hash-link" aria-label="Direct link to Python 中的 list 和 dict 是怎么实现的？" title="Direct link to Python 中的 list 和 dict 是怎么实现的？">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="python-中使用多线程可以达到多核cpu一起使用吗">Python 中使用多线程可以达到多核CPU一起使用吗？<a href="#python-中使用多线程可以达到多核cpu一起使用吗" class="hash-link" aria-label="Direct link to Python 中使用多线程可以达到多核CPU一起使用吗？" title="Direct link to Python 中使用多线程可以达到多核CPU一起使用吗？">​</a></h2>
<p>Python中有一个被称为Global Interpreter Lock（GIL）的东西，它会确保任何时候你的多个线程中，只有一个被执行。线程的执行速度非常之快，会让你误以为线程是并行执行的，但是实际上都是轮流执行。经过GIL这一道关卡处理，会增加执行的开销。</p>
<p>可以通过多进程实现多核任务。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="gilglobal-interpreter-lock">GIL(Global Interpreter Lock)<a href="#gilglobal-interpreter-lock" class="hash-link" aria-label="Direct link to GIL(Global Interpreter Lock)" title="Direct link to GIL(Global Interpreter Lock)">​</a></h2>
<p>全局解释器锁</p>
<p>全局解释器锁(Global Interpreter Lock)是计算机程序设计语言解释器用于同步线程的一种机制，它使得任何时刻仅有一个线程在执行。即便在多核处理器上，使用 GIL 的解释器也只允许同一时间执行一个线程，常见的使用 GIL 的解释器有CPython与Ruby MRI。可以看到GIL并不是Python独有的特性，是解释型语言处理多线程问题的一种机制而非语言特性。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gil的设计初衷">GIL的设计初衷?<a href="#gil的设计初衷" class="hash-link" aria-label="Direct link to GIL的设计初衷?" title="Direct link to GIL的设计初衷?">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>展开</summary><div><div class="collapsibleContent_i85q">
<!-- -->
单核时代高效利用CPU, 针对解释器级别的数据安全(不是thread-safe 线程安全)。
首先需要明确的是GIL并不是Python的特性，它是在实现Python解析器(CPython)时所引入的一个概念。当Python虚拟机的线程想要调用C的原生线程需要知道线程的上下文，因为没有办法控制C的原生线程的执行，所以只能把上下文关系传给原生线程，同理获取结果也是线
程在python虚拟机这边等待。那么要执行一次计算操作，就必须让执行程序的线程组串行执行。
</div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="为什么要加在解释器而不是在其他层">为什么要加在解释器,而不是在其他层?<a href="#为什么要加在解释器而不是在其他层" class="hash-link" aria-label="Direct link to 为什么要加在解释器,而不是在其他层?" title="Direct link to 为什么要加在解释器,而不是在其他层?">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>展开</summary><div><div class="collapsibleContent_i85q">
<!-- -->
GIL锁加在解释器一层，也就是说Python调用的Cython解释器上加了GIL锁，因为你python调用的所有线程都是原生线程。原生线程是通过C语言提供原生接口，相当于C语言的一个函数。你一调它，你就控制不了了它了，就必须等它给你返回结果。只要已通过python虚拟机
，再往下就不受python控制了，就是C语言自己控制了。加在Python虚拟机以下加不上去，只能加在Python解释器这一层。
</div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gil的实现是线程不安全为什么">GIL的实现是线程不安全?为什么?<a href="#gil的实现是线程不安全为什么" class="hash-link" aria-label="Direct link to GIL的实现是线程不安全?为什么?" title="Direct link to GIL的实现是线程不安全?为什么?">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>展开</summary><div><div class="collapsibleContent_i85q">
<!-- -->
是不安全的，具体情况要分类讨论。
<p>单核情况下:</p>
<p><img decoding="async" loading="lazy" src="https://images2017.cnblogs.com/blog/1088183/201709/1088183-20170926140930839-80064182.png" alt="单核情况下——线程不安全" class="img_ev3q"></p>
<blockquote>
<p>解释:</p>
<ol>
<li>到第5步的时候，可能这个时候python正好切换了一次GIL(据说python2.7中，每100条指令会切换一次GIL),执行的时间到了，被要求释放GIL,这个时候thead 1的count=0并没有得到执行，而是挂起状态，count=0这个上下文关系被存到寄存器中.</li>
<li>然后到第6步，这个时候thead 2开始执行，然后就变成了count = 1,返回给count，这个时候count=1.</li>
<li>然后再回到thead 1，这个时候由于上下文关系，thead 1拿到的寄存器中的count = 0，经过计算，得到count = 1，经过第13步的操作就覆盖了原来的count = 1的值，所以这个时候count依然是count = 1，所以这个数据并没有保护起来。</li>
</ol>
</blockquote>
<p>python2.x和3.x都是在执行IO操作的时候，强制释放GIL，使其他线程有机会执行程序。</p>
<p>Python2.x Python使用计数器ticks计算字节码，当执行100个字节码的时候强制释放GIL，其他线程获取GIL继续执行。ticks可以看作是Python自己的计数器，专门作用于GIL，释放后归零，技术可以调整。</p>
<p>Python3.x Python使用计时器，执行时间达到阈值后，当前线程释放GIL。总体来  说比Python3.x对CPU密集型任务更好，但是依然没有解决问题。</p>
<p>多核情况下:</p>
<p>多个CPU情况下，单个CPU释放GIL锁，其他CPU上的线程也会竞争，但是CPU-A可能又马上拿到了GIL，这样其他CPU上的线程只能继续等待，直到重新回到待调度状态。造成多线程在多核CPU情况下，效率反而会下降，出现了大量的资源浪费。</p>
</div></div></details>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是装饰器">什么是装饰器？<a href="#什么是装饰器" class="hash-link" aria-label="Direct link to 什么是装饰器？" title="Direct link to 什么是装饰器？">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="python-中的垃圾回收机制">Python 中的垃圾回收机制？<a href="#python-中的垃圾回收机制" class="hash-link" aria-label="Direct link to Python 中的垃圾回收机制？" title="Direct link to Python 中的垃圾回收机制？">​</a></h2>
<p><a href="https://www.jianshu.com/p/1e375fb40506" target="_blank" rel="noopener noreferrer">Python垃圾回收机制--完美讲解!</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-lambda-表达式">什么是 lambda 表达式？<a href="#什么是-lambda-表达式" class="hash-link" aria-label="Direct link to 什么是 lambda 表达式？" title="Direct link to 什么是 lambda 表达式？">​</a></h2>
<p>简单来说，lambda表达式通常是当你需要使用一个函数，但是又不想费脑袋去命名一个函数的时候使用，也就是通常所说的匿名函数。</p>
<p>lambda表达式一般的形式是：关键词lambda后面紧接一个或多个参数，紧接一个冒号“：”，紧接一个表达式</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是深拷贝和浅拷贝">什么是深拷贝和浅拷贝？<a href="#什么是深拷贝和浅拷贝" class="hash-link" aria-label="Direct link to 什么是深拷贝和浅拷贝？" title="Direct link to 什么是深拷贝和浅拷  贝？">​</a></h2>
<p>赋值（=），就是创建了对象的一个新的引用，修改其中任意一个变量都会影响到另一个。</p>
<p>浅拷贝 copy.copy：创建一个新的对象，但它包含的是对原始对象中包含项的引用（如果用引用的方式修改其中一个对象，另外一个也会修改改变）</p>
<p>深拷贝：创建一个新的对象，并且递归的复制它所包含的对象（修改其中一个，另外一个不会改变）{copy模块的deep.deepcopy()函数}</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="双等于和-is-有什么区别">双等于和 is 有什么区别？<a href="#双等于和-is-有什么区别" class="hash-link" aria-label="Direct link to 双等于和 is 有什么区别？" title="Direct link to 双等于和 is 有什么区别？">​</a></h2>
<p><code>==</code>比较的是两个变量的 value，只要值相等就会返回True</p>
<p><code>is</code>比较的是两个变量的 id，即<code>id(a) == id(b)</code>，只有两个变量指向同一个对象的时候，才会返回True</p>
<p>但是需要注意的是，比如以下代码：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">a = 2</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">b = 2</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">print(a is b)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>按照上面的解释，应该会输出False，但是事实上会输出True，这是因为Python中对小数据有缓存机制，-5~256之间的数据都会被缓存。</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="其它-python-知识点">其它 Python 知识点<a href="#其它-python-知识点" class="hash-link" aria-label="Direct link to 其它 Python 知识点" title="Direct link to 其它 Python 知识点">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="类型转换">类型转换<a href="#类型转换" class="hash-link" aria-label="Direct link to 类型转换" title="Direct link to 类型转换">​</a></h3>
<ul>
<li>list(x)</li>
<li>str(x)</li>
<li>set(x)</li>
<li>int(x)</li>
<li>tuple(x)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tryexcept">try...except<a href="#tryexcept" class="hash-link" aria-label="Direct link to try...except" title="Direct link to try...except">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list">list<a href="#list" class="hash-link" aria-label="Direct link to list" title="Direct link to list">​</a></h3>
<ul>
<li><code>lst[a:b]</code>：左闭右开</li>
<li><code>lst.append(value)</code>：在末尾添加元素，复杂度O(1)</li>
<li><code>lst.pop()</code>：弹出列表末尾元素，复杂度O(1)</li>
<li><code>lst.pop(index)</code>：弹出任意位置元素，将后面的元素前移，复杂度O(n)</li>
<li><code>lst.insert(index, value)</code>：插入元素，后面的元素后移，复杂度O(n)</li>
<li><code>lst.remove(value)</code>：移除等于value的第一个元素，后面的元素前移，复杂度O(n)</li>
<li><code>lst.count(value)</code>：计数值为value的元素个数</li>
<li><code>lst.sort(reverse = False)</code>：排序，默认升序</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="参考">参考<a href="#参考" class="hash-link" aria-label="Direct link to 参考" title="Direct link to 参考">​</a></h3>
<ul>
<li><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017318207388128" target="_blank" rel="noopener noreferrer">生成器 - 廖雪峰的官方网站</a></li>
<li><a href="https://www.cnblogs.com/yjtxin/p/11793243.html" target="_blank" rel="noopener noreferrer">Python中的is和==的区别</a></li>
<li><a href="https://www.mdeditor.tw/pl/pXhj" target="_blank" rel="noopener noreferrer">为什么Python多线程无法利用多核</a></li>
<li><a href="https://www.cnblogs.com/Keep-Ambition/p/7596098.html" target="_blank" rel="noopener noreferrer">GIL锁、线程锁(互斥锁)、递归锁(RLock)</a></li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#什么是-python-生成器" class="table-of-contents__link toc-highlight">什么是 Python 生成器？</a></li><li><a href="#什么是-python-迭代器" class="table-of-contents__link toc-highlight">什么是 Python 迭代器？</a></li><li><a href="#list-和-tuple-有什么区别" class="table-of-contents__link toc-highlight">list 和 tuple 有什么区别？</a></li><li><a href="#python-中的-list-和-dict-是怎么实现的" class="table-of-contents__link toc-highlight">Python 中的 list 和 dict 是怎么实现的？</a></li><li><a href="#python-中使用多线程可以达到多核cpu一起使用吗" class="table-of-contents__link toc-highlight">Python 中使用多线程可以达到多核CPU一起使用吗？</a></li><li><a href="#gilglobal-interpreter-lock" class="table-of-contents__link toc-highlight">GIL(Global Interpreter Lock)</a><ul><li><a href="#gil的设计初衷" class="table-of-contents__link toc-highlight">GIL的设计初衷?</a></li><li><a href="#为什么要加在解释器而不是在其他层" class="table-of-contents__link toc-highlight">为什么要加在解释器,而不是在其他层?</a></li><li><a href="#gil的实现是线程不安全为什么" class="table-of-contents__link toc-highlight">GIL的实现是线程不安全?为什么?</a></li></ul></li><li><a href="#什么是装饰器" class="table-of-contents__link toc-highlight">什么是装饰器？</a></li><li><a href="#python-中的垃圾回收机制" class="table-of-contents__link toc-highlight">Python 中的垃圾回收机制？</a></li><li><a href="#什么是-lambda-表达式" class="table-of-contents__link toc-highlight">什么是 lambda 表达式？</a></li><li><a href="#什么是深拷贝和浅拷贝" class="table-of-contents__link toc-highlight">什么是深拷贝和浅拷贝？</a></li><li><a href="#双等于和-is-有什么区别" class="table-of-contents__link toc-highlight">双等于和 is 有什么区别？</a></li><li><a href="#其它-python-知识点" class="table-of-contents__link toc-highlight">其它 Python 知识点</a><ul><li><a href="#类型转换" class="table-of-contents__link toc-highlight">类型转换</a></li><li><a href="#tryexcept" class="table-of-contents__link toc-highlight">try...except</a></li><li><a href="#list" class="table-of-contents__link toc-highlight">list</a></li><li><a href="#参考" class="table-of-contents__link toc-highlight">参考</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>